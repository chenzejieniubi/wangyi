{"remainingRequest":"D:\\web2020\\网易严选\\mall\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\web2020\\网易严选\\mall\\src\\views\\product.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\web2020\\网易严选\\mall\\src\\views\\product.vue","mtime":1597391779805},{"path":"D:\\web2020\\网易严选\\mall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\web2020\\网易严选\\mall\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\web2020\\网易严选\\mall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\web2020\\网易严选\\mall\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnDQoNCg0KbGV0IHNrdSA9IHsNCiAgLy8g5omA5pyJc2t16KeE5qC857G755uu5LiO5YW25YC855qE5LuO5bGe5YWz57O777yM5q+U5aaC5ZWG5ZOB5pyJ6aKc6Imy5ZKM5bC656CB5Lik5aSn57G76KeE5qC877yM6aKc6Imy5LiL6Z2i5Y+I5pyJ57qi6Imy5ZKM6JOd6Imy5Lik5Liq6KeE5qC85YC844CCDQogIC8vIOWPr+S7peeQhuino+S4uuS4gOS4quWVhuWTgeWPr+S7peacieWkmuS4quinhOagvOexu+ebru+8jOS4gOS4quinhOagvOexu+ebruS4i+WPr+S7peacieWkmuS4quinhOagvOWAvOOAgg0KICB0cmVlOiBbDQogICAgew0KICAgICAgazogJ+minOiJsicsIC8vIHNrdUtleU5hbWXvvJrop4TmoLznsbvnm67lkI3np7ANCiAgICAgIGtfczogJ3MxJywgLy8gc2t1S2V5U3Ry77yac2t1IOe7hOWQiOWIl+ihqO+8iOS4i+aWuSBsaXN077yJ5Lit5b2T5YmN57G755uu5a+55bqU55qEIGtleSDlgLzvvIx2YWx1ZSDlgLzkvJrmmK/ku47lsZ7kuo7lvZPliY3nsbvnm67nmoTkuIDkuKrop4TmoLzlgLwgaWQNCiAgICB9DQogIF0sDQogIC8vIOaJgOaciSBza3Ug55qE57uE5ZCI5YiX6KGo77yM5q+U5aaC57qi6Imy44CBTSDnoIHkuLrkuIDkuKogc2t1IOe7hOWQiO+8jOe6ouiJsuOAgVMg56CB5Li65Y+m5LiA5Liq57uE5ZCIDQogIGxpc3Q6IFsNCiAgICB7DQogICAgICBpZDogMjI1OSwgLy8gc2t1SWQNCiAgICAgIHByaWNlOjEwMCwNCiAgICAgICdzLTEnOiAnMicsIC8vIOinhOagvOexu+ebriBrX3Mg5Li6IHMxIOeahOWvueW6lOinhOagvOWAvCBpZA0KICAgICAgJ3MtMic6ICcxJywgLy8g6KeE5qC857G755uuIGtfcyDkuLogczIg55qE5a+55bqU6KeE5qC85YC8IGlkDQogICAgICBzdG9ja19udW06IDI0MCAvLyDlvZPliY0gc2t1IOe7hOWQiOWvueW6lOeahOW6k+WtmA0KICAgIH0sDQogICAgIHsNCiAgICAgIGlkOiAyMjU5LCAvLyBza3VJZA0KICAgICAgcHJpY2U6MTAwLA0KICAgICAgJ3MtMSc6ICcxJywgLy8g6KeE5qC857G755uuIGtfcyDkuLogczEg55qE5a+55bqU6KeE5qC85YC8IGlkDQogICAgICAncy0yJzogJzQnLCAvLyDop4TmoLznsbvnm64ga19zIOS4uiBzMiDnmoTlr7nlupTop4TmoLzlgLwgaWQNCiAgICAgIHN0b2NrX251bTogMTQwIC8vIOW9k+WJjSBza3Ug57uE5ZCI5a+55bqU55qE5bqT5a2YDQogICAgfQ0KICBdLA0KICBwcmljZTogJzEuMDAnLCAvLyDpu5jorqTku7fmoLzvvIjljZXkvY3lhYPvvIkNCiAgc3RvY2tfbnVtOiAyMjcsIC8vIOWVhuWTgeaAu+W6k+WtmA0KfQ0KZXhwb3J0IGRlZmF1bHQgew0KICAgIHByb3BzOlsnaWQnXSwNCiAgICBkYXRhKCl7DQogICAgICAgIHJldHVybnsNCiAgICAgICAgICAgIGRhdGE6e30sDQogICAgICAgICAgICBpbmZvOnt9LA0KICAgICAgICAgICAgYXR0cmlidXRlOnt9LA0KICAgICAgICAgICAgc2hvd1NrdTogZmFsc2UgLA0KICAgICAgICAgICAgc2t1OnNrdSwNCiAgICAgICAgICAgIGdvb2RzOnsNCiAgICAgICAgICAgICAgICAvLyDpu5jorqTllYblk4Egc2t1IOe8qeeVpeWbvg0KICAgICAgICAgICAgICAgIHBpY3R1cmU6ICdodHRwczovL2ltZy55emNkbi5jbi8xLmpwZycgDQogICAgICAgICAgICB9DQoNCiAgICAgICAgfQ0KICAgIH0sDQogICAgbWV0aG9kczp7DQogICAgICAgIG9uQ2xpY2tMZWZ0OmZ1bmN0aW9uKCl7DQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpDQogICAgICAgIH0sDQogICAgICAgIG9uQnV5Q2xpY2tlZDpmdW5jdGlvbigpew0KICAgICAgICAgICAgLy8g5bCG5b2T5YmN5ZWG5ZOB5o+Q5Lqk5Yiw6K6i5Y2V6aG1DQogICAgICAgIH0sDQogICAgICAgIG9uQWRkQ2FydENsaWNrZWQ6ZnVuY3Rpb24oc2t1RGF0YSl7DQogICAgICAgICAgICAvLyDpgInmi6nllYblk4Hop4TmoLzvvIzmj5DkuqTliLDotK3nianovaYNCiAgICAgICAgICAgIC8vIOiOt+WPlumAieS4reeahOWVhuWTgeW5tuaPkOS6pOWIsOWQjuerr2FwaQ0KICAgICAgICAgICAgdGhpcy5zaG93U2t1ID0gZmFsc2U7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhza3VEYXRhKQ0KDQogICAgICAgICAgICBsZXQgY2hvb3NlQ29udGVudCA9IHNrdURhdGEuc2VsZWN0ZWRTa3VDb21iWydzLTEnXSsnXycrc2t1RGF0YS5zZWxlY3RlZFNrdUNvbWJbJ3MtMiddDQogICAgICAgICAgICBjb25zb2xlLmxvZyhjaG9vc2VDb250ZW50KQ0KICAgICAgICAgICAgbGV0IHJlc3VsdFBybyA9IHRoaXMuZGF0YS5wcm9kdWN0TGlzdC5maWx0ZXIoKGl0ZW0saW5kZXgpPT57DQogICAgICAgICAgICAgICAgaWYoaXRlbS5nb29kc19zcGVjaWZpY2F0aW9uX2lkcz09Y2hvb3NlQ29udGVudCl7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlDQogICAgICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICAgICAgIGNob29zZVNrdSgpew0KICAgICAgICAgICAgdGhpcy5zaG93U2t1ID0gdHJ1ZTsNCiAgICAgICAgfQ0KDQogICAgfSwNCiAgICBjb21wdXRlZDp7DQogICAgICAgIGltYWdlczpmdW5jdGlvbigpew0KICAgICAgICAgICAgaWYodGhpcy5kYXRhLmdhbGxlcnk9PXVuZGVmaW5lZCl7DQogICAgICAgICAgICAgICAgcmV0dXJuIFtdDQogICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhLmdhbGxlcnkNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0sDQogICAgYXN5bmMgY3JlYXRlZCgpew0KICAgICAgICBsZXQgcmVzID0gYXdhaXQgYXhpb3MuZ2V0KHRoaXMuJHJvb3QuYXBpLkdvb2RzRGV0YWlsLHtwYXJhbXM6e2lkOnRoaXMuaWR9fSkNCiAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpDQogICAgICAgIHRoaXMuZGF0YSA9IHJlcy5kYXRhLmRhdGE7DQogICAgICAgIHRoaXMuaW5mbyA9IHRoaXMuZGF0YS5pbmZvOw0KICAgICAgICB0aGlzLmF0dHJpYnV0ZSA9IHRoaXMuZGF0YS5hdHRyaWJ1dGU7DQogICAgICAgIHRoaXMuZ29vZHMucGljdHVyZSA9IHRoaXMuaW5mby5wcmltYXJ5X3BpY191cmw7DQogICAgICAgIHRoaXMuZ29vZHMudGl0bGUgPSB0aGlzLmluZm8ubmFtZTsNCiAgICAgICAgdGhpcy5za3UucHJpY2UgPSB0aGlzLmluZm8ucmV0YWlsX3ByaWNlOw0KICAgICAgICB0aGlzLnNrdS5zdG9ja19udW0gPSB0aGlzLmluZm8uZ29vZHNfbnVtYmVyOw0KICAgICAgICBsZXQgdHJlZSA9IFtdDQogICAgICAgIHRoaXMuZGF0YS5zcGVjaWZpY2F0aW9uTGlzdC5mb3JFYWNoKChpdGVtLGluZGV4KSA9PiB7DQogICAgICAgICAgICBsZXQgYXJyID0gW10NCiAgICAgICAgICAgIGl0ZW0udmFsdWVMaXN0LmZvckVhY2goKHByb2R1Y3QsaSk9PnsNCiAgICAgICAgICAgICAgICBhcnIucHVzaCh7DQogICAgICAgICAgICAgICAgICAgIGlkOiBwcm9kdWN0LmlkLCAvLyBza3VWYWx1ZUlk77ya6KeE5qC85YC8IGlkDQogICAgICAgICAgICAgICAgICAgIG5hbWU6IHByb2R1Y3QudmFsdWUsIC8vIHNrdVZhbHVlTmFtZe+8muinhOagvOWAvOWQjeensA0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIHRyZWUucHVzaCh7DQogICAgICAgICAgICAgICAgazogaXRlbS5uYW1lLCAvLyBza3VLZXlOYW1l77ya6KeE5qC857G755uu5ZCN56ewDQogICAgICAgICAgICAgICAgdjogYXJyLA0KICAgICAgICAgICAgICAgIGtfczogInMtIitpdGVtLnNwZWNpZmljYXRpb25faWQsIC8vIHNrdUtleVN0cu+8mnNrdSDnu4TlkIjliJfooajvvIjkuIvmlrkgbGlzdO+8ieS4reW9k+WJjeexu+ebruWvueW6lOeahCBrZXkg5YC877yMdmFsdWUg5YC85Lya5piv5LuO5bGe5LqO5b2T5YmN57G755uu55qE5LiA5Liq6KeE5qC85YC8IGlkDQogICAgICAgICAgICB9KQ0KICAgICAgICB9KTsNCiAgICAgICAgdGhpcy5za3UudHJlZSA9IHRyZWU7DQogICAgfSwNCn0NCg=="},{"version":3,"sources":["product.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"product.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <div id=\"product\">\r\n        <h1>product</h1>\r\n        <van-nav-bar\r\n        title=\"标题\"\r\n        left-text=\"返回\"\r\n        left-arrow\r\n        @click-left=\"onClickLeft\"\r\n        />\r\n\r\n        <van-swipe  :autoplay=\"3000\" >\r\n            <van-swipe-item v-for=\"(image,index) in images\" :key=\"index\">\r\n                <img class=\"swipeImg\" v-lazy=\"image.img_url\" />\r\n                </van-swipe-item>\r\n        </van-swipe>\r\n\r\n        <div class=\"info\">\r\n            <span>30天无忧退货</span>\r\n            <span>48小时快速退款</span>\r\n            <span>满80元免邮费</span>   \r\n\r\n        </div>\r\n\r\n        <div class=\"proInfo\">\r\n            <h3 class=\"title\">{{info.name}}</h3>\r\n            <p class=\"brief\">{{info.goods_brief}}</p>\r\n            <p class=\"price\">￥{{info.retail_price}}</p>\r\n        </div>\r\n\r\n        <van-cell title=\"请输入商品规格\" is-link  />\r\n\r\n        <!-- 商品参数 -->\r\n        <div class=\"proParams\">\r\n            <h3>商品参数</h3>\r\n            <div class=\"proItem\" v-for=\"(item1,index1) in attribute\" :key=\"index1\">\r\n                <span class=\"title\">{{item1.name}}</span>\r\n                <span class=\"value\">{{item1.value}}</span>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"proDetail\" v-html=\"info.goods_desc\"></div>\r\n\r\n\r\n        <van-goods-action>\r\n            <van-goods-action-icon icon=\"cart-o\" text=\"购物车\" />\r\n            <van-goods-action-icon icon=\"star-o\" text=\"已收藏\" />\r\n            <van-goods-action-button @click=\"chooseSku\" type=\"warning\" text=\"加入购物车\" />\r\n            <van-goods-action-button type=\"danger\" text=\"立即购买\" />\r\n        </van-goods-action>\r\n\r\n\r\n\r\n\r\n        <!-- sku是商品唯一标识 -->\r\n        <van-sku\r\n        v-model=\"showSku\"\r\n        :sku=\"sku\"\r\n        :goods=\"goods\"\r\n        @buy-clicked=\"onBuyClicked\"\r\n        @add-cart=\"onAddCartClicked\"\r\n        />\r\n\r\n\r\n\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\n\r\n\r\nlet sku = {\r\n  // 所有sku规格类目与其值的从属关系，比如商品有颜色和尺码两大类规格，颜色下面又有红色和蓝色两个规格值。\r\n  // 可以理解为一个商品可以有多个规格类目，一个规格类目下可以有多个规格值。\r\n  tree: [\r\n    {\r\n      k: '颜色', // skuKeyName：规格类目名称\r\n      k_s: 's1', // skuKeyStr：sku 组合列表（下方 list）中当前类目对应的 key 值，value 值会是从属于当前类目的一个规格值 id\r\n    }\r\n  ],\r\n  // 所有 sku 的组合列表，比如红色、M 码为一个 sku 组合，红色、S 码为另一个组合\r\n  list: [\r\n    {\r\n      id: 2259, // skuId\r\n      price:100,\r\n      's-1': '2', // 规格类目 k_s 为 s1 的对应规格值 id\r\n      's-2': '1', // 规格类目 k_s 为 s2 的对应规格值 id\r\n      stock_num: 240 // 当前 sku 组合对应的库存\r\n    },\r\n     {\r\n      id: 2259, // skuId\r\n      price:100,\r\n      's-1': '1', // 规格类目 k_s 为 s1 的对应规格值 id\r\n      's-2': '4', // 规格类目 k_s 为 s2 的对应规格值 id\r\n      stock_num: 140 // 当前 sku 组合对应的库存\r\n    }\r\n  ],\r\n  price: '1.00', // 默认价格（单位元）\r\n  stock_num: 227, // 商品总库存\r\n}\r\nexport default {\r\n    props:['id'],\r\n    data(){\r\n        return{\r\n            data:{},\r\n            info:{},\r\n            attribute:{},\r\n            showSku: false ,\r\n            sku:sku,\r\n            goods:{\r\n                // 默认商品 sku 缩略图\r\n                picture: 'https://img.yzcdn.cn/1.jpg' \r\n            }\r\n\r\n        }\r\n    },\r\n    methods:{\r\n        onClickLeft:function(){\r\n            this.$router.go(-1)\r\n        },\r\n        onBuyClicked:function(){\r\n            // 将当前商品提交到订单页\r\n        },\r\n        onAddCartClicked:function(skuData){\r\n            // 选择商品规格，提交到购物车\r\n            // 获取选中的商品并提交到后端api\r\n            this.showSku = false;\r\n            console.log(skuData)\r\n\r\n            let chooseContent = skuData.selectedSkuComb['s-1']+'_'+skuData.selectedSkuComb['s-2']\r\n            console.log(chooseContent)\r\n            let resultPro = this.data.productList.filter((item,index)=>{\r\n                if(item.goods_specification_ids==chooseContent){\r\n                    return true\r\n                }else{\r\n                    return false\r\n                }\r\n            })\r\n        },\r\n        chooseSku(){\r\n            this.showSku = true;\r\n        }\r\n\r\n    },\r\n    computed:{\r\n        images:function(){\r\n            if(this.data.gallery==undefined){\r\n                return []\r\n            }else{\r\n                return this.data.gallery\r\n            }\r\n        }\r\n    },\r\n    async created(){\r\n        let res = await axios.get(this.$root.api.GoodsDetail,{params:{id:this.id}})\r\n        console.log(res.data)\r\n        this.data = res.data.data;\r\n        this.info = this.data.info;\r\n        this.attribute = this.data.attribute;\r\n        this.goods.picture = this.info.primary_pic_url;\r\n        this.goods.title = this.info.name;\r\n        this.sku.price = this.info.retail_price;\r\n        this.sku.stock_num = this.info.goods_number;\r\n        let tree = []\r\n        this.data.specificationList.forEach((item,index) => {\r\n            let arr = []\r\n            item.valueList.forEach((product,i)=>{\r\n                arr.push({\r\n                    id: product.id, // skuValueId：规格值 id\r\n                    name: product.value, // skuValueName：规格值名称\r\n                    })\r\n            })\r\n            tree.push({\r\n                k: item.name, // skuKeyName：规格类目名称\r\n                v: arr,\r\n                k_s: \"s-\"+item.specification_id, // skuKeyStr：sku 组合列表（下方 list）中当前类目对应的 key 值，value 值会是从属于当前类目的一个规格值 id\r\n            })\r\n        });\r\n        this.sku.tree = tree;\r\n    },\r\n}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n    #product{\r\n        .swipeImg{\r\n            width: 100%;\r\n        }\r\n        .info{\r\n            display: flex;\r\n            justify-content: space-around;\r\n            font-size: 12px;\r\n            color: #999;\r\n            height: 24px;\r\n            line-height: 24px;\r\n            background: #efefef;\r\n            span{\r\n                position: relative;\r\n            }\r\n            span::before{\r\n                content: \"\";\r\n                display: block;\r\n                position: absolute;\r\n                left: -10px;\r\n                top: 8px;\r\n                width: 4px;\r\n                height: 4px;\r\n                border-radius: 2px;\r\n                border: 1px solid red;\r\n            }\r\n        }\r\n        .proInfo{\r\n            .title{\r\n                font-weight: 500;\r\n                padding: 5px;\r\n            }\r\n            .brief{\r\n                font-size: 12px;\r\n                color: #999;\r\n                padding: 3px;\r\n            }\r\n            .price{\r\n                font-size: 16px;\r\n                color: red;\r\n                padding: 10px;\r\n            }\r\n        }\r\n        .van-cell__title{\r\n            text-align: left;\r\n        }\r\n        .proParams{\r\n            padding-bottom: 20px;\r\n            h3{\r\n                padding: 10px 3px;\r\n            }\r\n            .proItem{\r\n                width: 90%;\r\n                margin:0 auto;\r\n                display: flex;\r\n                justify-content: space-around;\r\n                height: 24px;\r\n                color: #999;\r\n                font-size: 12px;\r\n                background: #efefef;\r\n                line-height: 24px;\r\n                text-align: left;\r\n            }\r\n            span.title{\r\n                width: 40px;\r\n                padding: 0 10px;\r\n                border-right: 1px solid #ccc;\r\n            }\r\n            span.value{\r\n                width: 260px;\r\n                overflow: hidden;\r\n                text-overflow: ellipsis;\r\n                white-space: nowrap;\r\n            }\r\n        }\r\n        .proDetail{\r\n            width: 100%;\r\n            img{\r\n                width:100%;\r\n            }\r\n            p{\r\n                padding: 0;\r\n                margin: 0;\r\n                display: flex;\r\n            }\r\n        }\r\n    }\r\n</style>"]}]}